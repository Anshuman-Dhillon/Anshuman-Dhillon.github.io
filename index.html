<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Portfolio</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <video autoplay muted loop playsinline id="bg-video">
        <source src="assets/background.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <div id="header">
        <div class="container">
            <nav>
                <img src="assets/ad.png" class="logo">
                <ul>
                    <li><a href="#header">Home</a></li>
                    <li><a href="#about">About Me</a></li>
                    <li><a href="#Skills">Skills</a></li>
                    <li><a href="#portfolio">Projects</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>

            <div class="section">
                <div class="header-text">
                    <p>Ambitious Learner</p>
                    <h1>Hi, I'm <span id="typing-text"></span></h1>
                </div>
                <div class="header-image">
                    <img src="" alt="">
                </div>
            </div>
        </div>
    </div>

    <div id="about">
        <div class="container">
            <div class="row">
                <div class="about-col-1">
                    <img src="assets/image_nobg.png">
                </div>
                <div class="about-col-2">
                    <h1 class="sub-title">About Me</h1>
                    <p class="desc">I'm a Computer Engineering student at TMU
                        with a strong passion for software development,
                        particularly in full-stack development. I have been
                        exploring various technologies and frameworks to build
                        dynamic and responsive web applications. I have showcased
                        my skills through several projects, which you can find below.
                    </p>

                    <div class="tab-titles">
                        <p class="tab-links active-link" onclick="opentab('skills')">Skills</p>
                        <p class="tab-links" onclick="opentab('experience')">Experience</p>
                        <p class="tab-links" onclick="opentab('education')">Education</p>
                    </div>
                    <div class="tab-contents active-tab" id="skills">
                        <ul>
                            <li><span>HTML/CSS</span><br>Responsive Web Design, Flexbox, Grid, Animations</li>
                            <li><span>JavaScript</span><br>DOM Manipulation, Fetch API</li>
                            <li><span>Front-End</span><br>React (Component-based UI, State Management)</li>
                            <li><span>Back-End</span><br>Node.js, Express, REST API</li>
                            <li><span>Databases</span><br>NoSQL Databases (MongoDB/Mongoose)</li>
                        </ul>
                    </div>
                    <div class="tab-contents" id="experience">
                        <ul>
                            <li><span>February 2025 - April 2025</span><br>Quality Assurance (Game Tester), Dough Dough
                                Digital Inc.</li>
                        </ul>
                    </div>
                    <div class="tab-contents" id="education">
                        <ul>
                            <li><span>2023 - 2028</span><br>Bachelor of Engineering (BEng): Computer Engineering,
                                Toronto Metropolitan University</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="Skills">
        <div class="container">
            <h1 class="sub-title">My Skills</h1>

            <div class="skills-list">
                <div>
                    <h2>Programming Languages</h2>
                    <div class="icon-row">
                        <img src="assets/icons/HTML.png" alt="HTML">
                        <img src="assets/icons/css.png" alt="CSS">
                        <img src="assets/icons/js.png" alt="JavaScript">
                        <img src="assets/icons/python.png" alt="Python">
                        <img src="assets/icons/java.png" alt="Java">
                    </div>
                </div>
                <div>
                    <h2>Technologies, Tools & Libraries</h2>
                    <div class="icon-row">
                        <img src="assets/icons/vscode.png" alt="Visual Studio Code">
                        <img src="assets/icons/nodejs.png" alt="Node.js">
                        <img src="assets/icons/React.png" alt="React">
                        <img src="assets/icons/MongoDB.png" alt="MongoDB">
                        <img src="assets/icons/git-logo.png" alt="Git">
                        <img src="assets/icons/github.png" alt="GitHub">
                        <img src="assets/icons/Jira.png" alt="Jira">
                        <img src="assets/icons/linux.png" alt="Linux">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="portfolio">
        <div class="container">
            <h1 class="sub-title">My Projects</h1>
            <div class="work-list">
                <!-- Projects will be dynamically generated here -->
            </div>
            <a href="https://github.com/Anshuman-Dhillon" class="btn">See more projects</a>
        </div>
    </div>

    <div id="contact">
        <div class="container">
            <div class="row">
                <div class="contact-left">
                    <h1 class="sub-title">Contact Me</h1>
                    <p><img src="assets/icons/email.png" alt="">anshumandhillon@gmail.com</p>

                    <div class="social-icons">
                        <a href="https://www.linkedin.com/in/anshuman-dhillon/" target="_blank"><img
                                src="assets/icons/linkedin.png" alt="LinkedIn"></a>
                        <a href="https://github.com/Anshuman-Dhillon" target="_blank"><img src="assets/icons/github.png"
                                alt="GitHub"></a>
                    </div>
                </div>
                <div class="contact-right">
                    <form name="submit-to-google-sheet">
                        <input type="text" name="Name" placeholder="Your Name" required>
                        <input type="email" name="Email" placeholder="Your Email" required>
                        <textarea name="Message" rows="6" placeholder="Your Message"></textarea>
                        <button type="submit" class="btn btn2">Submit</button>
                    </form>
                    <span id="msg"></span>
                </div>
            </div>
        </div>
    </div>

    <footer class="copyright">
        <p>Copyright © <span id="year"></span> Anshuman Dhillon.</p>
        <p>Background GIF from <a href="https://pixabay.com/gifs/tech-background-design-pattern-18050/"
                target="_blank">Pixabay</a></p>
        <p>All product names, logos, and brands are property of their respective owners.</p>
    </footer>

    <script>
        var tablinks = document.getElementsByClassName("tab-links");
        var tabcontents = document.getElementsByClassName("tab-contents");

        function opentab(tabname) {
            for (tablink of tablinks) {
                tablink.classList.remove("active-link");
            }

            for (tabcontent of tabcontents) {
                tabcontent.classList.remove("active-tab");
            }

            event.currentTarget.classList.add("active-link");
            document.getElementById(tabname).classList.add("active-tab");
        }
    </script>

    <script>
        const pc = {
            g: {
                t: "Anshuman",
                s: "Ambitious Learner",
                a: "I'm a Computer Engineering student at TMU with a strong passion for software development, particularly in low-level systems programming.",
                sk: {
                    "C/C++": "Low-level systems, Computer Architecture, Computer Graphics",
                    "Java": "Object-Oriented Programming, Data Structures, Algorithms",
                    "VHDL": "Digital Logic Design, FPGA Programming",
                },
                si: {
                    "Programming Languages": [
                        { n: "C", src: "assets/icons/c.png" },
                        { n: "C++", src: "assets/icons/cpp.png" },
                        { n: "Java", src: "assets/icons/java.png" },
                    ],
                    "Technologies, Tools & Libraries": [
                        { n: "Visual Studio Code", src: "assets/icons/vscode.png" },
                        { n: "Visual Studio", src: "assets/icons/vs.png" },
                        { n: "Docker", src: "assets/icons/docker.png" },
                        { n: "Vulkan", src: "assets/icons/vulkan.png" },
                        { n: "OpenGL", src: "assets/icons/openGL.png" },
                        { n: "Git", src: "assets/icons/git-logo.png" },
                        { n: "GitHub", src: "assets/icons/github.png" },
                        { n: "Jira", src: "assets/icons/Jira.png" },
                        { n: "Linux", src: "assets/icons/linux.png" }
                    ]
                },
                p: [
                    { t: "Retro Game Emulator", d: "Used OpenGL and Dear ImGui to make a GameBoy Emulator that runs commercial ROMs", l: "https://github.com/Anshuman-Dhillon/Retro-Game-Emulator", m: "assets/projects/emulator.mp4", mt: "video" },
                    { t: "Real-Time RayTracer", d: "Built with the Walnut framework to render 3D graphics in real-time", l: "https://github.com/Anshuman-Dhillon/Real-Time-RayTracer", m: "assets/projects/Raytracing-demo.mp4", mt: "video" },
                ]
            },

            w: {
                t: "Anshuman",
                s: "Ambitious Learner",
                a: "I'm a Computer Engineering student specializing in modern web development. With expertise in React, Node.js, and full-stack architecture, I build scalable web applications that deliver exceptional user experiences. My focus is on creating responsive, performant, and accessible web solutions.",
                sk: {
                    "Frontend": "React, Next.js, Vue.js, HTML/CSS",
                    "Backend": "Node.js, Express, REST APIs, Firebase",
                    "Database": "MongoDB, Firebase",
                    "DevOps": "AWS, CI/CD, Git",
                },
                si: {
                    "Frontend Technologies": [
                        { n: "HTML", src: "assets/icons/HTML.png" },
                        { n: "CSS", src: "assets/icons/css.png" },
                        { n: "JavaScript", src: "assets/icons/js.png" },
                        { n: "React", src: "assets/icons/React.png" }
                    ],
                    "Backend & DevOps": [
                        { n: "Node.js", src: "assets/icons/nodejs.png" },
                        { n: "MongoDB", src: "assets/icons/MongoDB.png" },
                        { n: "Git", src: "assets/icons/git-logo.png" },
                        { n: "GitHub", src: "assets/icons/github.png" },
                        { n: "Visual Studio Code", src: "assets/icons/vscode.png" }
                    ]
                },
                p: [
                    { t: "E-Commerce Platform", d: "Full-stack 3D model marketplace with a catalog and payment system", l: "#", m: "assets/projects/ecommerce-demo.mp4", mt: "video" },
                ]
            },

            gd: {
                t: "Anshuman",
                s: "Ambitious Learner",
                a: "I'm a Computer Engineering student with a passion for game development and quality assurance. With hands-on experience as a QA Game Tester at Dough Dough Digital Inc., I combine technical programming skills with a deep understanding of game mechanics and user experience.",
                sk: {
                    "Game Engines": "Unity, Unreal Engine, Godot",
                    "Programming": "C#, C++, Python, Game Logic",
                    "QA Testing": "Bug Detection, Test Cases, Regression Testing",
                    "Game Design": "Level Design, Game Mechanics, UI/UX",
                    "Tools": "Jira, Perforce, Git, Debugging Tools"
                },
                si: {
                    "Game Development": [
                        { n: "Python", src: "assets/icons/python.png" },
                        { n: "Java", src: "assets/icons/java.png" }
                    ],
                    "QA & Development Tools": [
                        { n: "Jira", src: "assets/icons/Jira.png" },
                        { n: "Git", src: "assets/icons/git-logo.png" },
                        { n: "GitHub", src: "assets/icons/github.png" },
                        { n: "Visual Studio Code", src: "assets/icons/vscode.png" },
                        { n: "Linux", src: "assets/icons/linux.png" }
                    ]
                },
                p: [
                    { t: "3D Platformer Game", d: "Unity-based platformer with physics puzzles and dynamic lighting", l: "#", m: "assets/projects/platformer-gameplay.mp4", mt: "video" },
                    { t: "Mobile Puzzle Game", d: "Cross-platform puzzle game with progressive difficulty", l: "#", m: "assets/projects/puzzle-game.png", mt: "image" },
                    { t: "QA Testing Portfolio", d: "Comprehensive testing documentation and bug reports", l: "#", m: "assets/projects/qa-portfolio.jpg", mt: "image" }
                ]
            }
        };

        function debugMediaFiles() {
            const config = pc[getParam('v')] || pc.g;

            config.p.forEach((project, index) => {
                if (project.m) {
                    console.log(`Project ${index + 1}: ${project.t}`);
                    console.log(`Media file: ${project.m}`);
                    console.log(`Media type: ${project.mt}`);

                    // Test if the file exists by trying to load it
                    if (project.mt === 'image') {
                        const img = new Image();
                        img.onload = () => console.log(`✅ Image loaded: ${project.m}`);
                        img.onerror = () => console.log(`❌ Image failed: ${project.m}`);
                        img.src = project.m;
                    } else if (project.mt === 'video') {
                        const video = document.createElement('video');
                        video.onloadeddata = () => console.log(`✅ Video loaded: ${project.m}`);
                        video.onerror = () => console.log(`❌ Video failed: ${project.m}`);
                        video.src = project.m;
                    }
                }
            });
        }

        function getParam(name) {
            const params = new URLSearchParams(window.location.search);
            return params.get(name) || 'g';
        }

        function updateContent(spec) {
            const config = pc[spec] || pc.g;

            document.getElementById('typing-text').textContent = '';
            typeText(config.t);

            document.querySelector('.header-text p').textContent = config.s;

            document.querySelector('.desc').textContent = config.a;

            const skillsList = document.querySelector('#skills ul');
            skillsList.innerHTML = '';
            Object.entries(config.sk).forEach(([skill, description]) => {
                const li = document.createElement('li');
                li.innerHTML = `<span>${skill}</span><br>${description}`;
                skillsList.appendChild(li);
            });

            if (config.si) {
                const skillsContainer = document.querySelector('.skills-list');
                skillsContainer.innerHTML = '';

                Object.entries(config.si).forEach(([categoryName, icons]) => {
                    const skillDiv = document.createElement('div');
                    skillDiv.innerHTML = `
                        <h2>${categoryName}</h2>
                        <div class="icon-row">
                            ${icons.map(icon =>
                        `<img src="${icon.src}" alt="${icon.n}" title="${icon.n}">`
                    ).join('')}
                        </div>
                    `;
                    skillsContainer.appendChild(skillDiv);
                });
            }

            // Fixed dynamic project generation with custom media
            const workList = document.querySelector('.work-list');
            workList.innerHTML = '';

            config.p.forEach(project => {
                const workDiv = document.createElement('div');
                workDiv.className = 'work';

                // Generate media element - always try to use custom media first
                let mediaElement = '';
                
                if (project.m && project.mt === 'video') {
                    // Video element for MP4 files
                    mediaElement = `<video class="media-background" autoplay muted loop playsinline onError="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <source src="${project.m}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <img class="media-background" src="assets/placeholder.png" alt="${project.t}" style="display:none;">`;
                } else if (project.m) {
                    // Image element for GIFs, PNGs, JPGs, etc.
                    mediaElement = `<img class="media-background" src="${project.m}" alt="${project.t}" onError="this.src='assets/placeholder.png';">`;
                } else {
                    // Fallback to placeholder only if no media source is provided
                    mediaElement = `<img class="media-background" src="assets/placeholder.png" alt="${project.t}">`;
                }

                workDiv.innerHTML = `
                    ${mediaElement}
                    <div class="layer">
                        <h3>${project.t}</h3>
                        <p>${project.d}</p>
                        <a href="${project.l}"><img src="assets/icons/link.png" alt="Link"></a>
                    </div>
                `;
                workList.appendChild(workDiv);
            });
            
            // Debug media files after content update
            console.log('Media debug for current config:');
            debugMediaFiles();
        }

        function typeText(text) {
            const span = document.getElementById('typing-text');
            let i = 0;

            function type() {
                if (i < text.length) {
                    span.textContent += text.charAt(i);
                    i++;
                    setTimeout(type, 150);
                }
            }

            type();
        }

        document.addEventListener('DOMContentLoaded', function () {
            const specialization = getParam('v');
            updateContent(specialization);

            const titles = {
                g: 'Anshuman Dhillon - Portfolio',
                w: 'Anshuman Dhillon - Portfolio',
                gd: 'Anshuman Dhillon - Portfolio',
                s: 'Anshuman Dhillon - Portfolio'
            };
            document.title = titles[specialization] || titles.g;

            console.log('Current specialization:', specialization);
            console.log('Current config:', pc[specialization] || pc.g);
        });
    </script>

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbzvUDKCLO3J5wrBqXInByVLVJ7WBsvfC6BMsFVbAWKljV1K32_JVIMoHV5_lbrIXck9/exec'
        const form = document.forms['submit-to-google-sheet']
        const msg = document.getElementById("msg")
        const submitBtn = form.querySelector('button[type="submit"]')

        const originalBtnText = submitBtn.textContent
        let isSubmitting = false
        let cooldownTimer = null

        form.addEventListener('submit', e => {
            e.preventDefault()

            if (isSubmitting) return

            isSubmitting = true

            // Update button with loading state
            submitBtn.disabled = true
            submitBtn.classList.add('loading')
            submitBtn.textContent = 'Sending...'

            // Show immediate feedback
            msg.innerHTML = `
                <div style="display: flex; align-items: center; gap: 8px;">
                    <div style="width: 16px; height: 16px; border: 2px solid #61b752; border-top: 2px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                    Sending your message...
                </div>
            `
            msg.style.color = "#61b752"

            fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                .then(response => {
                    if (response.ok) {
                        msg.innerHTML = "✅ Message sent successfully!"
                        msg.style.color = "#61b752"
                        form.reset()

                        // Start cooldown period (prevents rapid successive submissions)
                        startCooldown(3000) // 3 second cooldown
                    } else {
                        throw new Error('Network response was not ok')
                    }
                })
                .catch(error => {
                    console.error('Error!', error.message)
                    msg.innerHTML = "❌ Failed to send message. Please try again."
                    msg.style.color = "#ff6b6b"

                    // Shorter cooldown on error
                    startCooldown(1000)
                })
                .finally(() => {
                    // Clear message after 6 seconds
                    setTimeout(() => {
                        msg.innerHTML = ""
                    }, 6000)
                })
        })

        function startCooldown(duration) {
            // Clear any existing cooldown
            if (cooldownTimer) clearTimeout(cooldownTimer)

            cooldownTimer = setTimeout(() => {
                resetButton()
            }, duration)
        }

        function resetButton() {
            isSubmitting = false
            submitBtn.disabled = false
            submitBtn.classList.remove('loading')
            submitBtn.textContent = originalBtnText
            cooldownTimer = null
        }

        // Add spinner keyframes if not already in CSS
        const style = document.createElement('style')
        style.textContent = `
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        `
        document.head.appendChild(style)
    </script>

    <script>
        document.getElementById("year").textContent = new Date().getFullYear();
    </script>
</body>

</html>